/*! For license information please see test-control.js.LICENSE.txt?ver=aea22aa0 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{61:function(t,e){!function(t){function e(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}function n(t){return new Promise((function(e,n){var i=function(a){setTimeout((function(){t&&t.data?e():a>=20?n():i(++a)}),50)};i(0)}))}function i(){v=m?(t.screen.orientation.angle||0)*u:(t.orientation||0)*u}function a(t){for(var e in l.orientation.data=t,l.orientation.callbacks)l.orientation.callbacks[e].call(this)}function o(t){for(var e in l.motion.data=t,l.motion.callbacks)l.motion.callbacks[e].call(this)}if(void 0===t.FULLTILT||null===t.FULLTILT){var r=Math.PI,s=r/2,c=2*r,u=r/180,h=180/r,l={orientation:{active:!1,callbacks:[],data:void 0},motion:{active:!1,callbacks:[],data:void 0}},m=!(!t.screen||!t.screen.orientation||void 0===t.screen.orientation.angle||null===t.screen.orientation.angle),v=(m?t.screen.orientation.angle:t.orientation||0)*u,f=s,d=r,p=c/3,y=-s,x={version:"0.5.3",getDeviceOrientation:function(t){return new Promise((function(e,i){var a=new x.DeviceOrientation(t);a.start(),new n(l.orientation).then((function(){e(a)})).catch((function(){a.stop(),i("DeviceOrientation is not supported")}))}))},getDeviceMotion:function(t){return new Promise((function(e,i){var a=new x.DeviceMotion(t);a.start(),new n(l.motion).then((function(){e(a)})).catch((function(){a.stop(),i("DeviceMotion is not supported")}))}))},Quaternion:function(t,n,i,a){var o;this.set=function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=i||1},this.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},this.setFromEuler=function(){var t,e,n,i,a,o,r,s,c,h,l,m;return function(v){return n=((v=v||{}).alpha||0)*u,t=(v.beta||0)*u,e=(v.gamma||0)*u,o=n/2,i=t/2,a=e/2,r=Math.cos(i),s=Math.cos(a),c=Math.cos(o),h=Math.sin(i),l=Math.sin(a),m=Math.sin(o),this.set(h*s*c-r*l*m,r*l*c+h*s*m,r*s*m+h*l*c,r*s*c-h*l*m),this.normalize(),this}}(),this.setFromRotationMatrix=function(){var t;return function(n){return t=n.elements,this.set(.5*Math.sqrt(1+t[0]-t[4]-t[8])*e(t[7]-t[5]),.5*Math.sqrt(1-t[0]+t[4]-t[8])*e(t[2]-t[6]),.5*Math.sqrt(1-t[0]-t[4]+t[8])*e(t[3]-t[1]),.5*Math.sqrt(1+t[0]+t[4]+t[8])),this}}(),this.multiply=function(t){return o=x.Quaternion.prototype.multiplyQuaternions(this,t),this.copy(o),this},this.rotateX=function(t){return o=x.Quaternion.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(o),this},this.rotateY=function(t){return o=x.Quaternion.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(o),this},this.rotateZ=function(t){return o=x.Quaternion.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(o),this},this.normalize=function(){return x.Quaternion.prototype.normalize(this)},this.set(t,n,i,a)}};x.Quaternion.prototype={constructor:x.Quaternion,multiplyQuaternions:function(){var t=new x.Quaternion;return function(e,n){var i=e.x,a=e.y,o=e.z,r=e.w,s=n.x,c=n.y,u=n.z,h=n.w;return t.set(i*h+r*s+a*u-o*c,a*h+r*c+o*s-i*u,o*h+r*u+i*c-a*s,r*h-i*s-a*c-o*u),t}}(),normalize:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w);return 0===e?(t.x=0,t.y=0,t.z=0,t.w=1):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t.w*=e),t},rotateByAxisAngle:function(){var t,e,n=new x.Quaternion,i=new x.Quaternion;return function(a,o,r){return t=(r||0)/2,e=Math.sin(t),i.set((o[0]||0)*e,(o[1]||0)*e,(o[2]||0)*e,Math.cos(t)),n=x.Quaternion.prototype.multiplyQuaternions(a,i),x.Quaternion.prototype.normalize(n)}}()},x.RotationMatrix=function(t,e,n,i,a,o,r,s,c){var h;this.elements=new Float32Array(9),this.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},this.set=function(t,e,n,i,a,o,r,s,c){this.elements[0]=t||1,this.elements[1]=e||0,this.elements[2]=n||0,this.elements[3]=i||0,this.elements[4]=a||1,this.elements[5]=o||0,this.elements[6]=r||0,this.elements[7]=s||0,this.elements[8]=c||1},this.copy=function(t){this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8]},this.setFromEuler=function(){var t,e,n,i,a,o,r,s,c;return function(h){return n=((h=h||{}).alpha||0)*u,t=(h.beta||0)*u,e=(h.gamma||0)*u,i=Math.cos(t),a=Math.cos(e),o=Math.cos(n),r=Math.sin(t),s=Math.sin(e),c=Math.sin(n),this.set(o*a-c*r*s,-i*c,a*c*r+o*s,a*c+o*r*s,o*i,c*s-o*a*r,-i*s,r,i*a),this.normalize(),this}}(),this.setFromQuaternion=function(){var t,e,n,i;return function(a){return t=a.w*a.w,e=a.x*a.x,n=a.y*a.y,i=a.z*a.z,this.set(t+e-n-i,2*(a.x*a.y-a.w*a.z),2*(a.x*a.z+a.w*a.y),2*(a.x*a.y+a.w*a.z),t-e+n-i,2*(a.y*a.z-a.w*a.x),2*(a.x*a.z-a.w*a.y),2*(a.y*a.z+a.w*a.x),t-e-n+i),this}}(),this.multiply=function(t){return h=x.RotationMatrix.prototype.multiplyMatrices(this,t),this.copy(h),this},this.rotateX=function(t){return h=x.RotationMatrix.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(h),this},this.rotateY=function(t){return h=x.RotationMatrix.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(h),this},this.rotateZ=function(t){return h=x.RotationMatrix.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(h),this},this.normalize=function(){return x.RotationMatrix.prototype.normalize(this)},this.set(t,e,n,i,a,o,r,s,c)},x.RotationMatrix.prototype={constructor:x.RotationMatrix,multiplyMatrices:function(){var t,e,n=new x.RotationMatrix;return function(i,a){return t=i.elements,e=a.elements,n.set(t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8]),n}}(),normalize:function(t){var e=t.elements,n=e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[1]*e[3]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6];return e[0]/=n,e[1]/=n,e[2]/=n,e[3]/=n,e[4]/=n,e[5]/=n,e[6]/=n,e[7]/=n,e[8]/=n,t.elements=e,t},rotateByAxisAngle:function(){var t,e,n=new x.RotationMatrix,i=new x.RotationMatrix,a=!1;return function(o,r,s){return i.identity(),a=!1,t=Math.sin(s),e=Math.cos(s),1===r[0]&&0===r[1]&&0===r[2]?(a=!0,i.elements[4]=e,i.elements[5]=-t,i.elements[7]=t,i.elements[8]=e):1===r[1]&&0===r[0]&&0===r[2]?(a=!0,i.elements[0]=e,i.elements[2]=t,i.elements[6]=-t,i.elements[8]=e):1===r[2]&&0===r[0]&&0===r[1]&&(a=!0,i.elements[0]=e,i.elements[1]=-t,i.elements[3]=t,i.elements[4]=e),a?(n=x.RotationMatrix.prototype.multiplyMatrices(o,i),n=x.RotationMatrix.prototype.normalize(n)):n=o,n}}()},x.Euler=function(t,e,n){this.set=function(t,e,n){this.alpha=t||0,this.beta=e||0,this.gamma=n||0},this.copy=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma},this.setFromRotationMatrix=function(){var t,e,n,i;return function(a){(t=a.elements)[8]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),i=Math.atan2(-t[6],t[8])):t[8]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-r:r,i=Math.atan2(t[6],-t[8])):t[6]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),i=-s):t[6]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-r:r,i=-s):(e=Math.atan2(t[3],t[0]),n=t[7]>0?s:-s,i=0),0>e&&(e+=c),e*=h,n*=h,i*=h,this.set(e,n,i)}}(),this.setFromQuaternion=function(){var t,e,n;return function(i){var a=i.w*i.w,o=i.x*i.x,u=i.y*i.y,l=i.z*i.z,m=a+o+u+l,v=i.w*i.x+i.y*i.z,f=1e-6;if(v>(.5-f)*m)t=2*Math.atan2(i.y,i.w),e=s,n=0;else if((-.5+f)*m>v)t=-2*Math.atan2(i.y,i.w),e=-s,n=0;else{var d=a-o+u-l,p=2*(i.w*i.z-i.x*i.y),y=a-o-u+l,x=2*(i.w*i.y-i.x*i.z);y>0?(t=Math.atan2(p,d),e=Math.asin(2*v/m),n=Math.atan2(x,y)):(t=Math.atan2(-p,-d),e=-Math.asin(2*v/m),e+=0>e?r:-r,n=Math.atan2(-x,-y))}0>t&&(t+=c),t*=h,e*=h,n*=h,this.set(t,e,n)}}(),this.rotateX=function(t){return x.Euler.prototype.rotateByAxisAngle(this,[1,0,0],t),this},this.rotateY=function(t){return x.Euler.prototype.rotateByAxisAngle(this,[0,1,0],t),this},this.rotateZ=function(t){return x.Euler.prototype.rotateByAxisAngle(this,[0,0,1],t),this},this.set(t,e,n)},x.Euler.prototype={constructor:x.Euler,rotateByAxisAngle:function(){var t=new x.RotationMatrix;return function(e,n,i){return t.setFromEuler(e),t=x.RotationMatrix.prototype.rotateByAxisAngle(t,n,i),e.setFromRotationMatrix(t),e}}()},x.DeviceOrientation=function(e){this.options=e||{};var n=0,i=0;if(this.alphaOffsetScreen=0,this.alphaOffsetDevice=void 0,"game"===this.options.type){var a=function(e){return null!==e.alpha&&(this.alphaOffsetDevice=new x.Euler(e.alpha,0,0),this.alphaOffsetDevice.rotateZ(-v),++i>=10)?void t.removeEventListener("deviceorientation",a,!1):void(++n>=200&&t.removeEventListener("deviceorientation",a,!1))}.bind(this);t.addEventListener("deviceorientation",a,!1)}else if("world"===this.options.type){var o=function(e){return!0!==e.absolute&&void 0!==e.webkitCompassAccuracy&&null!==e.webkitCompassAccuracy&&+e.webkitCompassAccuracy>=0&&+e.webkitCompassAccuracy<50&&(this.alphaOffsetDevice=new x.Euler(e.webkitCompassHeading,0,0),this.alphaOffsetDevice.rotateZ(v),this.alphaOffsetScreen=v,++i>=10)?void t.removeEventListener("deviceorientation",o,!1):void(++n>=200&&t.removeEventListener("deviceorientation",o,!1))}.bind(this);t.addEventListener("deviceorientation",o,!1)}},x.DeviceOrientation.prototype={constructor:x.DeviceOrientation,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&l.orientation.callbacks.push(e),m?t.screen.orientation.addEventListener("change",i,!1):t.addEventListener("orientationchange",i,!1),l.orientation.active||(t.addEventListener("deviceorientation",a,!1),l.orientation.active=!0)},stop:function(){l.orientation.active&&(t.removeEventListener("deviceorientation",a,!1),l.orientation.active=!1)},listen:function(t){this.start(t)},getFixedFrameQuaternion:function(){var t=new x.Euler,e=new x.RotationMatrix,n=new x.Quaternion;return function(){var i=l.orientation.data||{alpha:0,beta:0,gamma:0},a=i.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,a-=t.alpha),t.set(a,i.beta,i.gamma),n.setFromEuler(t),n}}(),getScreenAdjustedQuaternion:function(){var t;return function(){return(t=this.getFixedFrameQuaternion()).rotateZ(-v),t}}(),getFixedFrameMatrix:function(){var t=new x.Euler,e=new x.RotationMatrix;return function(){var n=l.orientation.data||{alpha:0,beta:0,gamma:0},i=n.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,i-=t.alpha),t.set(i,n.beta,n.gamma),e.setFromEuler(t),e}}(),getScreenAdjustedMatrix:function(){var t;return function(){return(t=this.getFixedFrameMatrix()).rotateZ(-v),t}}(),getFixedFrameEuler:function(){var t,e=new x.Euler;return function(){return t=this.getFixedFrameMatrix(),e.setFromRotationMatrix(t),e}}(),getScreenAdjustedEuler:function(){var t,e=new x.Euler;return function(){return t=this.getScreenAdjustedMatrix(),e.setFromRotationMatrix(t),e}}(),isAbsolute:function(){return!(!l.orientation.data||!0!==l.orientation.data.absolute)},getLastRawEventData:function(){return l.orientation.data||{}},ALPHA:"alpha",BETA:"beta",GAMMA:"gamma"},x.DeviceMotion=function(t){this.options=t||{}},x.DeviceMotion.prototype={constructor:x.DeviceMotion,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&l.motion.callbacks.push(e),m?t.screen.orientation.addEventListener("change",i,!1):t.addEventListener("orientationchange",i,!1),l.motion.active||(t.addEventListener("devicemotion",o,!1),l.motion.active=!0)},stop:function(){l.motion.active&&(t.removeEventListener("devicemotion",o,!1),l.motion.active=!1)},listen:function(t){this.start(t)},getScreenAdjustedAcceleration:function(){var t=l.motion.data&&l.motion.data.acceleration?l.motion.data.acceleration:{x:0,y:0,z:0},e={};switch(v){case f:e.x=-t.y,e.y=t.x;break;case d:e.x=-t.x,e.y=-t.y;break;case p:case y:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedAccelerationIncludingGravity:function(){var t=l.motion.data&&l.motion.data.accelerationIncludingGravity?l.motion.data.accelerationIncludingGravity:{x:0,y:0,z:0},e={};switch(v){case f:e.x=-t.y,e.y=t.x;break;case d:e.x=-t.x,e.y=-t.y;break;case p:case y:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedRotationRate:function(){var t=l.motion.data&&l.motion.data.rotationRate?l.motion.data.rotationRate:{alpha:0,beta:0,gamma:0},e={};switch(v){case f:e.beta=-t.gamma,e.gamma=t.beta;break;case d:e.beta=-t.beta,e.gamma=-t.gamma;break;case p:case y:e.beta=t.gamma,e.gamma=-t.beta;break;default:e.beta=t.beta,e.gamma=t.gamma}return e.alpha=t.alpha,e},getLastRawEventData:function(){return l.motion.data||{}}},t.FULLTILT=x}}(window)},65:function(t,e,n){"use strict";n.r(e),n.d(e,"TestControl",(function(){return s}));n(58);var i=n(39),a=n(3),o=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};n(61);const{FULLTILT:r}=window;class s{constructor(){this.deviceOrientationConnected=!1,this.alpha=0}onAdd(t){return this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl",this.__init(t,this._container),this._container}__init(t,e){Object(a.c)(i.c`
                <vaadin-button
                    @click=${e=>o(this,void 0,void 0,(function*(){if(DeviceOrientationEvent&&!this.deviceOrientationConnected)if(this.deviceOrientationHandler=e=>{const{alpha:n,webkitCompassHeading:i}=e;this.rotateTo(t,n,i)},"function"==typeof DeviceOrientationEvent.requestPermission){"granted"===(yield DeviceOrientationEvent.requestPermission())&&(this.deviceOrientationConnected=!0,window.addEventListener("deviceorientation",this.deviceOrientationHandler,!0))}else this.deviceOrientationConnected=!0,window.addEventListener("deviceorientation",this.deviceOrientationHandler,!0);else this.deviceOrientationConnected&&this.doRotate(t)}))}
                    >Rotate</vaadin-button
                >
            `,e)}rotateTo(t,e,n){var i;return o(this,void 0,void 0,(function*(){const a=yield new r.Euler;this.alpha=null!==(i=null!=n?n:null==a?void 0:a.alpha)&&void 0!==i?i:e,this.rotateInterval||(this.rotateInterval=setInterval(()=>this.doRotate(t),1e3))}))}doRotate(t){return o(this,void 0,void 0,(function*(){t.setPitch(60),t.rotateTo(this.alpha,{duration:1e3,animate:!0})}))}onRemove(){this._container.parentNode.removeChild(this._container)}}}}]);